{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport * as Location from \"expo-location\";\nimport { useState, useEffect } from \"react\";\nvar fetchUserLocation = function fetchUserLocation() {\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    location = _useState2[0],\n    setLocation = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    errorMsg = _useState4[0],\n    setErrorMsg = _useState4[1];\n  var getPermisions = function () {\n    var _ref = _asyncToGenerator(function* () {\n      var _yield$Location$reque = yield Location.requestForegroundPermissionsAsync(),\n        status = _yield$Location$reque.status;\n      if (status !== \"granted\") {\n        setErrorMsg(\"Permission to access location was denied\");\n        return;\n      }\n    });\n    return function getPermisions() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var getLocation = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      getPermisions();\n      var location = yield Location.getCurrentPositionAsync({});\n      var newLocation = {\n        id: 442,\n        title: \"Your Current Location\",\n        latitude: location.coords.latitude,\n        longitude: location.coords.longitude,\n        latitudeDelta: 0.01,\n        longitudeDelta: 0.01\n      };\n      setLocation(newLocation);\n    });\n    return function getLocation() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    getLocation();\n  }, []);\n  var text = \"Waiting..\";\n  if (errorMsg) {\n    text = errorMsg;\n  } else if (location) {\n    text = JSON.stringify(location);\n  }\n  return {\n    location: location,\n    errorMsg: errorMsg\n  };\n};\nexport default fetchUserLocation;","map":{"version":3,"names":["AsyncStorage","Location","useState","useEffect","fetchUserLocation","_useState","_useState2","_slicedToArray","location","setLocation","_useState3","_useState4","errorMsg","setErrorMsg","getPermisions","_ref","_asyncToGenerator","_yield$Location$reque","requestForegroundPermissionsAsync","status","apply","arguments","getLocation","_ref2","getCurrentPositionAsync","newLocation","id","title","latitude","coords","longitude","latitudeDelta","longitudeDelta","text","JSON","stringify"],"sources":["C:/Users/nishchal/Documents/github/native_travel_app_frontend/hook/fetchLocation.js"],"sourcesContent":["import AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport * as Location from \"expo-location\";\nimport { useState, useEffect } from \"react\";\n\n\nconst fetchUserLocation = () => {\n    const [location, setLocation] = useState(null);\n    const [errorMsg, setErrorMsg] = useState(null);\n\n    const getPermisions = async () => {\n        let { status } = await Location.requestForegroundPermissionsAsync();\n        if (status !== \"granted\") {\n            setErrorMsg(\"Permission to access location was denied\");\n            return;\n        }\n    };\n\n    const getLocation = async () => {\n        getPermisions();\n        let location = await Location.getCurrentPositionAsync({});\n        let newLocation = {\n            id: 442,\n            title: \"Your Current Location\",\n            latitude: location.coords.latitude,\n            longitude: location.coords.longitude,\n            latitudeDelta: 0.01,\n            longitudeDelta: 0.01,\n        };\n        setLocation(newLocation);\n        // await AsyncStorage.setItem(\n        //     'location',\n        //     JSON.stringify(newLocation)\n        //   );\n    };\n\n    useEffect(() => {\n        getLocation();\n    }, []);\n\n    let text = \"Waiting..\";\n    if (errorMsg) {\n      text = errorMsg;\n    } else if (location) {\n      text = JSON.stringify(location);\n    }\n\n    return {location, errorMsg}\n} \n\nexport default fetchUserLocation"],"mappings":";;AAAA,OAAOA,YAAY,MAAM,2CAA2C;AACpE,OAAO,KAAKC,QAAQ,MAAM,eAAe;AACzC,SAASC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAG3C,IAAMC,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAA,EAAS;EAC5B,IAAAC,SAAA,GAAgCH,QAAQ,CAAC,IAAI,CAAC;IAAAI,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAvCG,QAAQ,GAAAF,UAAA;IAAEG,WAAW,GAAAH,UAAA;EAC5B,IAAAI,UAAA,GAAgCR,QAAQ,CAAC,IAAI,CAAC;IAAAS,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAAvCE,QAAQ,GAAAD,UAAA;IAAEE,WAAW,GAAAF,UAAA;EAE5B,IAAMG,aAAa;IAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAG,aAAY;MAC9B,IAAAC,qBAAA,SAAuBhB,QAAQ,CAACiB,iCAAiC,CAAC,CAAC;QAA7DC,MAAM,GAAAF,qBAAA,CAANE,MAAM;MACZ,IAAIA,MAAM,KAAK,SAAS,EAAE;QACtBN,WAAW,CAAC,0CAA0C,CAAC;QACvD;MACJ;IACJ,CAAC;IAAA,gBANKC,aAAaA,CAAA;MAAA,OAAAC,IAAA,CAAAK,KAAA,OAAAC,SAAA;IAAA;EAAA,GAMlB;EAED,IAAMC,WAAW;IAAA,IAAAC,KAAA,GAAAP,iBAAA,CAAG,aAAY;MAC5BF,aAAa,CAAC,CAAC;MACf,IAAIN,QAAQ,SAASP,QAAQ,CAACuB,uBAAuB,CAAC,CAAC,CAAC,CAAC;MACzD,IAAIC,WAAW,GAAG;QACdC,EAAE,EAAE,GAAG;QACPC,KAAK,EAAE,uBAAuB;QAC9BC,QAAQ,EAAEpB,QAAQ,CAACqB,MAAM,CAACD,QAAQ;QAClCE,SAAS,EAAEtB,QAAQ,CAACqB,MAAM,CAACC,SAAS;QACpCC,aAAa,EAAE,IAAI;QACnBC,cAAc,EAAE;MACpB,CAAC;MACDvB,WAAW,CAACgB,WAAW,CAAC;IAK5B,CAAC;IAAA,gBAhBKH,WAAWA,CAAA;MAAA,OAAAC,KAAA,CAAAH,KAAA,OAAAC,SAAA;IAAA;EAAA,GAgBhB;EAEDlB,SAAS,CAAC,YAAM;IACZmB,WAAW,CAAC,CAAC;EACjB,CAAC,EAAE,EAAE,CAAC;EAEN,IAAIW,IAAI,GAAG,WAAW;EACtB,IAAIrB,QAAQ,EAAE;IACZqB,IAAI,GAAGrB,QAAQ;EACjB,CAAC,MAAM,IAAIJ,QAAQ,EAAE;IACnByB,IAAI,GAAGC,IAAI,CAACC,SAAS,CAAC3B,QAAQ,CAAC;EACjC;EAEA,OAAO;IAACA,QAAQ,EAARA,QAAQ;IAAEI,QAAQ,EAARA;EAAQ,CAAC;AAC/B,CAAC;AAED,eAAeR,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}